/* ============================================================
   YASB Theme: Catppuccin Mocha – Brightened Unified Edition (Fixed)
   ------------------------------------------------------------
   ・Windowsダークモード時の文字色黒化を防止 (!important追加)
   ・デバッグ用アウトラインの削除
   ・全ウィジェット背景色を #387822 に統一
   ============================================================ */

/* ============================================================
   1. Global Bar Settings (高さを30pxに固定)
   ============================================================ */
.yasb-bar {
    height: 30px !important;
    /* 【重要】高さを30pxに固定 */
    box-sizing: border-box;
    /* パディングを含めたサイズ計算にする */
    background-color: transparent !important;
    border-bottom: none !important;
    font-family: "Segoe UI", "Cascadia Code", monospace;
    font-size: 13px;
    color: #cdd6f4 !important;
    /* フレックスボックスで垂直方向の中央揃えを強制 */
    display: flex;
    align-items: center;
}

/* ============================================================
   2. Common Widget Settings (マージンによる隙間を排除)
   ============================================================ */
.widget {
    /* 上下のマージンを削除し、左右のみ3px残す */
    margin: 0 3px;

    /* 高さ30pxのバーに対して、少し小さくして浮遊感を出すなら以下 */
    /* 完全に埋めたい場合は padding: 4px 12px; などに調整 */
    padding: 3px 12px;

    border-radius: 6px;
    font-weight: 600;
    color: #cdd6f4;

    /* アイコンや文字の垂直位置を安定させる */
    display: flex;
    align-items: center;
    justify-content: center;
    height: 24px;
    /* ウィジェット自体の高さを明示(バー30px - 上下余白) */
}

/* ============================================================
   Left Side: Komorebi (修正箇所)
   ============================================================ */

/* Workspaces */
.workspace-widget {
    background-color: #387822 !important;
    padding: 0px 4px;
}

/* 【修正】colorに !important を付与し、
   OSがダークモードでも文字色を強制的に明るく維持します
*/
.workspace-widget button {
    color: #ffffff !important;
    /* ここを修正: 強制的に白 */
    background-color: transparent;
    border: none;
    padding: 2px 6px;
    transition: all 0.2s ease;
}

.workspace-widget button.active {
    background-color: #387822 !important;
    color: #ffffff !important;
    /* ここも念のため !important */
    font-weight: bold;
}

/* Active Window Title */
.active-window-widget {
    background-color: #387822 !important;
    color: #ffffff !important;
    border: 1px solid #b4befe;
    font-weight: 700;
    padding: 0 8px;
    border-radius: 6px;
    text-shadow: 0 0 6px rgba(0, 0, 0, 0.6);
}

/* Layout Icon (komorebi_active_layout) */
.komorebi-active-layout {
    background-color: #387822;
    color: #000000 !important;
    /* 黒文字を強制 */
    border: 1px solid #ebedfb;
    border-radius: 6px;
    padding: 0px 8px;
}

/* 内部アイコンや子要素の枠を除去して二重化防止 */
#komorebi_active_layout *,
.active-layout-widget * {
    border: none !important;
    background-color: transparent !important;
    color: #1e1e2e !important;
}

/* ============================================================
   Center: Clock
   ============================================================ */
.yasb-bar .clock-widget,
.yasb-bar .clock-widget * {
    color: #ffffff !important;
    font-size: 18px !important;
    background-color: transparent !important;
    /* 透過または半透明設定 */
    background-color: rgba(56, 120, 34, 0.7) !important;
}

/* ============================================================
   Right Side: System Info / Weather / IP Info
   ============================================================ */

.weather-widget,
.ip-info-widget,
.cpu-widget,
.memory-widget,
.traffic-widget,
.explorer-widget {
    background-color: #387822 !important;
    color: #ffffff !important;
    border-radius: 4px;
    padding: 0px 8px;
    border: 1px solid #b4befe;
}

/* 右側ウィジェットの子要素すべて白色化 */
.weather-widget *,
.ip-info-widget *,
.cpu-widget *,
.memory-widget *,
.traffic-widget *,
.explorer-widget * {
    color: #ffffff !important;
}

/* 枠線のみアクセント色で個性を保持 */
.weather-widget {
    border-color: #94e2d5;
}

.ip-info-widget {
    border-color: #f9e2af;
}

.cpu-widget {
    border-color: #a6e3a1;
}

.memory-widget {
    border-color: #89b4fa;
}

.traffic-widget {
    border-color: #f5c2e7;
}

.explorer-widget {
    border-color: #89dceb;
}

/* ============================================================
   Global Visual Enhancements
   ============================================================ */

.widget:hover {
    filter: brightness(1.1);
    transition: 0.2s;
}

.yasb-bar,
.widget,
.widget * {
    text-shadow: none;
}

/* ============================================================
   FIX: Active Window Title visibility (Finalized)
   ============================================================ */

.active-window-widget,
.active-window-widget * {
    background-color: #387822 !important;
    color: #ffffff !important;
    font-weight: 700 !important;
    text-shadow: 0 0 6px rgba(235, 228, 228, 0.6);
    border: 1px solid #b4befe !important;
}

/* 子要素に余分な枠を出さない */
.active-window-widget * {
    border: none !important;
    background-color: transparent !important;
}

/* hover時：微発光 */
.active-window-widget:hover {
    filter: brightness(1.15);
    border-color: #cdf7a6 !important;
}

/* 診断用コードは削除済み */
