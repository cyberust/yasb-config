/* ============================================================
   YASB Theme: Catppuccin Mocha – Brightened Unified Edition
   ------------------------------------------------------------
   ・komorebiレイアウトアイコンの二重枠を解消
   ・ウィンドウタイトルの視認性を最大化
   ・全体の明度・階調を統一
   ============================================================ */

/* 1. Global Bar Settings */
.yasb-bar {
    background-color: transparent !important;
    /* 背景色を透明に */
    border-bottom: none !important;
    /* 下線も消す */
    font-family: "Segoe UI", "Cascadia Code", monospace;
    font-size: 13px;
    color: #cdd6f4 !important;
}

/* 2. Common Widget Settings */
.widget {
    padding: 2px 12px;
    margin: 4px 3px;
    border-radius: 6px;
    font-weight: 600;
    color: #cdd6f4;
}

/* ============================================================
   Left Side: Komorebi
   ============================================================ */

/* Workspaces */
.workspace-widget {
    background-color: #45475a;
    padding: 0px 4px;
}

.workspace-widget button {
    color: #cdd6f4;
    background-color: transparent;
    border: none;
    padding: 2px 6px;
    transition: all 0.2s ease;
}

.workspace-widget button.active {
    background-color: #cba6f7;
    color: #1e1e2e;
    font-weight: bold;
}

/* Active Window Title */
.active-window-widget {
    background-color: #45475a;
    /* 背景を塗りつぶし（テーマに合う暗めの色で視認性向上） */
    color: #f5e0dc;
    border: 1px solid #b4befe;
    font-weight: 700;
    padding: 0 8px;
    border-radius: 6px;
    text-shadow: 0 0 6px rgba(0, 0, 0, 0.6);
}

/* Layout Icon (komorebi_active_layout) */
.komorebi-active-layout {
    background-color: #b4befe;
    /* Lavender */
    color: #000000;
    /* 黒文字で可視（元の#ceceedは明るすぎる可能性があるため修正例） */
    border: 1px solid #ebedfb;
    /* 外枠1本のみ */
    border-radius: 6px;
    padding: 0px 8px;
}

/* 内部アイコンや子要素の枠を除去して二重化防止 */
#komorebi_active_layout *,
.active-layout-widget * {
    border: none !important;
    background-color: transparent !important;
    color: #1e1e2e !important;
}

/* ============================================================
   Center: Clock
   ============================================================ */
.clock-widget {
    background-color: #e6f3e7;
    color: #1e1e2e;
}

/* ============================================================
   Right Side: System Info / Weather / IP Info
   ============================================================ */

.weather-widget,
.ip-info-widget,
.cpu-widget,
.memory-widget,
.traffic-widget,
.explorer-widget {
    background-color: #387822 !important;
    /* 淡いトーンで全体調和 */
    color: #ffffff !important;
    border-radius: 4px;
    padding: 0px 8px;
    border: 1px solid #b4befe;
}

/* 右側ウィジェットの子要素すべて白色化 */
.weather-widget *,
.ip-info-widget *,
.cpu-widget *,
.memory-widget *,
.traffic-widget *,
.explorer-widget * {
    color: #ffffff !important;
}

/* ============================================================
   Global Visual Enhancements
   ============================================================ */

.widget:hover {
    filter: brightness(1.1);
    transition: 0.2s;
}

.yasb-bar,
.widget,
.widget * {
    text-shadow: none;
}

/* ============================================================
   FIX: Active Window Title visibility (Finalized)
   ============================================================ */

.active-window-widget,
.active-window-widget * {
    background-color: #387822 !important;
    /* 塗りつぶしをここでも適用（一貫性確保） */
    color: #ffffff !important;
    /* Rosewater tone for visibility */
    font-weight: 700 !important;
    text-shadow: 0 0 6px rgba(235, 228, 228, 0.6);
    border: 1px solid #b4befe !important;
    /* 外枠: Lavender */
    /* 子要素側の枠を削除して二重化防止 */
}

/* 子要素に余分な枠を出さない（これが二重化防止） */
.active-window-widget * {
    border: none !important;
    background-color: transparent !important;
}

/* hover時：微発光 */
.active-window-widget:hover {
    filter: brightness(1.15);
    border-color: #cba6f7 !important;
    /* Mauve系で軽く強調 */
}
